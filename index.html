<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Configurador Cafe Racer 3D</title>
    <script type="module" src="https://ajax.googleapis.com/ajax/libs/model-viewer/3.4.0/model-viewer.min.js"></script>
    
    <style>
        body { margin: 0; font-family: sans-serif; background-color: #1a1a1a; color: white; }
        model-viewer { width: 100vw; height: 80vh; background-color: #222; }
        
        .controls {
            padding: 20px;
            display: flex;
            gap: 10px;
            justify-content: center;
            background: #111;
        }

        button {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            transition: 0.3s;
        }

        .btn-color { background-color: #ff4444; color: white; }
        .btn-color:hover { opacity: 0.8; }
    </style>
</head>
<body>

    <model-viewer id="moto-3d" 
        src="BMWK100.glb" 
        camera-controls 
        auto-rotate 
        shadow-intensity="1" 
        ar 
        touch-action="pan-y">
        
        <div slot="poster">Cargando tu Cafe Racer...</div>
    </model-viewer>

    <div class="controls" style="display: flex; flex-direction: column; align-items: center; gap: 15px;">
    
    <div>
        <label>Color del Tanque:</label>
        <button onclick="changePartColor('Tanque', '#ff0000')" style="background:red; width:30px; height:30px; border-radius:50%;"></button>
        <button onclick="changePartColor('Tanque', '#0000ff')" style="background:blue; width:30px; height:30px; border-radius:50%;"></button>
        <button onclick="changePartColor('Tanque', '#333333')" style="background:#333; width:30px; height:30px; border-radius:50%;"></button>
    </div>

    <div>
        <label>Color del Chasis:</label>
        <button onclick="changePartColor('Chasis', '#ffffff')" style="background:white; width:30px; height:30px; border-radius:50%;"></button>
        <button onclick="changePartColor('Chasis', '#000000')" style="background:black; width:30px; height:30px; border-radius:50%;"></button>
        <button onclick="changePartColor('Chasis', '#f1c40f')" style="background:gold; width:30px; height:30px; border-radius:50%;"></button>
    </div>

    </div>
    
    <script>
        const modelViewer = document.querySelector('#moto-3d');
    
        // Función universal para cambiar color por nombre de pieza
        function changePartColor(nombrePieza, colorHex) {
            // Buscamos el material que coincida con el nombre que pusiste en Blender
            const material = modelViewer.model.materials.find(m => m.name === nombrePieza);
            
            if (material) {
                material.pbrMetallicRoughness.setBaseColorFactor(colorHex);
            } else {
                console.warn("No encontré la pieza: " + nombrePieza + ". Revisa los nombres en Blender.");
            }
        }
    </script>

</body>

</html>

